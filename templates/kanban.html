<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kanban Board</title>
</head>
<body>
    <h1>Kanban Board</h1>
    <a href="/export_word">Esporta Report in Word</a>
    <a href="/export_pdf">Esporta Schermata in PDF</a>

    <form action="/" method="get">
        <label for="status">Filtra per stato:</label>
        <select name="status" id="status">
            <option value="">Tutti</option>
            <option value="To Do">To Do</option>
            <option value="In Progress">In Progress</option>
            <option value="Done">Done</option>
        </select>
        <label for="priority">Filtra per priorità:</label>
        <select name="priority" id="priority">
            <option value="">Tutte</option>
            <option value="Alta">Alta</option>
            <option value="Media">Media</option>
            <option value="Bassa">Bassa</option>
        </select>
        <button type="submit">Applica Filtro</button>
    </form>

    <h2>To Do</h2>
    <ul>
        {% for task in tasks if task.status == 'To Do' %}
            <li>
                {{ task.title }}<br>
                Creato il: {{ task.created_at|strftime }}<br>
                Priorità: {{ task.priority }}
                <a href="/update_task/{{ task.id }}/In Progress">Start</a>
                <a href="/delete_task/{{ task.id }}">Delete</a>
            </li>
        {% endfor %}
    </ul>

    <h2>In Progress</h2>
    <ul>
        {% for task in tasks if task.status == 'In Progress' %}
            <li>
                {{ task.title }}<br>
                Creato il: {{ task.created_at|strftime }}<br>
                Priorità: {{ task.priority }}
                <a href="/update_task/{{ task.id }}/Done">Complete</a>
                <a href="/delete_task/{{ task.id }}">Delete</a>
            </li>
        {% endfor %}
    </ul>

    <h2>Done</h2>
    <ul>
        {% for task in tasks if task.status == 'Done' %}
            <li>
                {{ task.title }}<br>
                Creato il: {{ task.created_at|strftime }}<br>
                Priorità: {{ task.priority }}
                <a href="/delete_task/{{ task.id }}">Delete</a>
            </li>
        {% endfor %}
    </ul>

    <h2>Aggiungi Task</h2>
    <form action="/add_task" method="post">
        <input type="text" name="title" placeholder="Titolo" required>
        <select name="priority">
            <option value="Alta">Alta</option>
            <option value="Media" selected>Media</option>
            <option value="Bassa">Bassa</option>
        </select>
        <button type="submit">Aggiungi</button>
    </form>
</body>
</html>